# Use hardware acceleration
vo=gpu

# Use high quality default profile
profile=gpu-hq

# Direct rendering (decode directly to GPU memory)
vd-lavc-dr=yes

# Enable use of PBOs.  Helps for large source videos
opengl-pbo=yes

# Filter function for upscaling
scale=spline36

# Weight bias to multiply into negative coefficients
scale-clamp=0.2

# Filter function to use for interpolating chroma information
cscale=spline36

#glsl-shader=~~/shaders/ravu-r3-rgb.hook
#glsl-shader=~~/shaders/mpv-prescalers/ravu-r3-compute-vulkan.hook

# Automatically select the OS-provided ICC display profile
icc-profile-auto=yes

# Cache 3D LUTs created from ICC profile
icc-cache-dir=/tmp/mpv-icc

# Cache compiled GLSL shaders
gpu-shader-cache-dir=/tmp/mpv-shaders/

# Readjust audio to match video
video-sync=display-resample

# Reduce judder
interpolation=yes

# Filter used for interpolation
tscale=oversample

# Blend subtitles directly onto upscaled video frames
#blend-subtitles=yes

# Number of debanding steps to perform per sample
deband-iterations=2

# Debanding filter's initial radius
deband-range=12

# Rotate through dithering patterns on each frame
temporal-dither=yes

#vf-defaults=yadif:interlaced-only=no

# Enable cache when needed
cache=auto

# Always try to use the demuxer cache when seeking
demuxer-seekable-cache=yes

# Control how much data the demuxer is allowed to buffer ahead
demuxer-max-bytes=1024MiB

# Control how much data the demuxer is allowed to preserve
demuxer-max-back-bytes=1024MiB

# Enable youtube-dl hook script
ytdl=yes

# Video format / quality passed to youtube-dl
ytdl-format=(bestvideo[height<=720])+(bestaudio[acodec=opus]/bestaudio)/best

# Use PulseAudio
ao=pulse

# Audio buffer size
pulse-buffer=250

# Workaround for PulseAudio timing bugs
#pulse-latency-hacks=yes

# Output stereo sound
audio-channels=stereo

# Start and max volume settings at 100%
volume=100
volume-max=100

# Insert scaletempo audio filter when playing at non-100% speed
audio-pitch-correction=yes

# Don't use automatic normalization
audio-normalize-downmix=no

# Audio normalization settings
af-add=@audnorm:!loudnorm=I=-25:TP=-1.5:LRA=1:linear=false
#af-add=@audnorm:!loudnorm=I=-16:TP=-1.5:LRA=11
af-add=@dynnorm:!dynaudnorm=f=500:g=17:r=0.1

# Don't create a window when playing an audio file
audio-display=no

# Don't start in fullscreen mode
fullscreen=no

# Color console output
msg-color=yes

# Prepend module name to each console message
msg-module=yes

# Load URLs from playlists which are considered unsafe
load-unsafe-playlists=yes

# Prefetch playlist entries before current entry finishes
prefetch-playlist=yes

no-osc
# osd-msg1="FPS: ${estimated-display-fps}"

# Default subtitle language
slang=eng,en,enUS,en-US
alang=jpn,jp,eng,en,enUS,en-US
ytdl-raw-options=sub-lang="en,eng,enUS,en-US",write-sub=

# Output video stats
term-playing-msg='Resolution: ${width}x${height}, Framerate: ${container-fps} Hz'

# On screen display
osd-font-size=20
osd-color="#ffffffff"
osd-border-color="#ff151515"
osd-border-size=2
osd-shadow-offset=1
osd-shadow-color="#11000000"
osd-fractions

# Subtitles
sub-ass-force-style=Kerning=yes
sub-ass-override=scale
sub-scale=0.5
sub-pos=100
sub-font="SF Pro Text"
sub-font-size=70
sub-margin-y=50
sub-color="#FFFFFFFF"
sub-border-color="#FF151515"
sub-border-size=6
sub-shadow-offset=1
sub-shadow-color="#33000000"
sub-spacing=0.5


# Profiles

[protocol.http]
force-window=immediate

[protocol.https]
profile=protocol.http

[protocol.ytdl]
profile=protocol.http

# Audio-only content
[audio]
mute=no
force-window=no
no-video
ytdl-format=bestaudio/best
cache-initial=1

[movie]
fullscreen
volume=100

[normalize]
volume=70
af-toggle=@audnorm

[image]
sub-auto=no
audio-file-auto=no
profile=nodir
glsl-shaders-clr
mute=yes
scale=ewa_lanczossharp
background=0.1
input-conf=~~/input-image.conf
video-unscaled=yes
title="mvi - ${?media-title:${media-title}}${!media-title:No file}"
image-display-duration=inf
loop-file=yes

[extension.gif]
interpolation=no

[extension.png]
video-aspect=no

[extension.jpg]
video-aspect=no

[extension.jpeg]
profile=extension.jpg

[nocms]
profile=image
icc-profile-auto=no

[web]
profile=normalize
loop-file=yes
sub-visibility=no

[booru]
gpu-api=opengl
fbo-format=rgba16f
profile=image
profile=normalize
video-unscaled=no
force-window=immediate

[bench]
audio=no
untimed=yes
video-sync=display-desync
vulkan-swap-mode=immediate
opengl-swapinterval=0
osd-msg1="FPS: ${estimated-display-fps}"

[4k]
profile=normalize
fullscreen=yes
vd-lavc-threads=32
deband=no
fbo-format=rgba16hf
