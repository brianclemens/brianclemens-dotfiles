<?xml version="1.0"?>
<!DOCTYPE fontconfig SYSTEM "fonts.dtd">

<fontconfig>

  <match target="font">

    <edit name="antialias" mode="assign">
      <bool>true</bool>
    </edit>

    <edit name="autohint" mode="assign">
      <bool>false</bool>
    </edit>

    <edit name="embeddedbitmap" mode="assign">
      <bool>false</bool>
    </edit>

    <edit name="hinting" mode="assign">
      <bool>true</bool>
    </edit>

    <edit name="hintstyle" mode="assign">
      <const>hintslight</const>
    </edit>

    <edit name="force_hintstyle" mode="assign">
      <const>hintslight</const>
    </edit>

    <edit name="lcdfilter" mode="assign">
      <const>lcddefault</const>
    </edit>

    <edit name="rgba" mode="assign">
      <const>rgb</const>
    </edit>

  </match>

  <!--
  This adds a generic family 'emoji',
  aimed for apps that don't specify specific font family for rendering emojis.
  -->
  <match target="pattern">
      <test qual="any" name="family"><string>emoji</string></test>
      <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
  </match>

  <!--
  This adds JoyPixels as a final fallback font for the default font families.
  In this case, JoyPixels will be selected if and only if no other font can provide a given symbol.

  Note, usually other fonts will have some glyphs available (especilly Symbola font),
  causing some emojis to be black&white and ugly.
  -->
  <match target="pattern">
      <test name="family"><string>sans</string></test>
      <edit name="family" mode="append"><string>JoyPixels</string></edit>
  </match>

  <match target="pattern">
      <test name="family"><string>serif</string></test>
      <edit name="family" mode="append"><string>JoyPixels</string></edit>
  </match>

  <match target="pattern">
      <test name="family"><string>sans-serif</string></test>
      <edit name="family" mode="append"><string>JoyPixels</string></edit>
  </match>

  <match target="pattern">
      <test name="family"><string>monospace</string></test>
      <edit name="family" mode="append"><string>JoyPixels</string></edit>
  </match>

  <!--
  It seems Symbola is often selected as a fallback font before JoyPixels.
  This will try to remove Symbola from the list of fallback fonts.
  -->
  <selectfont>
      <rejectfont>
          <pattern>
              <patelt name="family">
                  <string>Symbola</string>
              </patelt>
          </pattern>
      </rejectfont>
  </selectfont>

  <!--
  Recognize alternative ways of writing JoyPixels family name.
  -->
  <match target="pattern">
      <test qual="any" name="family"><string>Emoji One</string></test>
      <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
  </match>

  <match target="pattern">
      <test qual="any" name="family"><string>EmojiOne Color</string></test>
      <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
  </match>

  <match target="pattern">
      <test qual="any" name="family"><string>EmojiOne Mozilla</string></test>
      <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
  </match>

  <!--
  Use JoyPixels when other popular fonts are being specifically requested.

  It is quite common that websites would only request Apple and Google emoji fonts, and then fallback to b&w Symbola.
  These aliases will make JoyPixels be selected in such cases to provide good-looking emojis.
  -->
  <match target="pattern">
      <test qual="any" name="family"><string>Apple Color Emoji</string></test>
      <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
  </match>

  <match target="pattern">
      <test qual="any" name="family"><string>Segoe UI Emoji</string></test>
      <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
  </match>

  <match target="pattern">
      <test qual="any" name="family"><string>Segoe UI Symbol</string></test>
      <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
  </match>

  <match target="pattern">
      <test qual="any" name="family"><string>Noto Color Emoji</string></test>
      <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
  </match>

  <match target="pattern">
      <test qual="any" name="family"><string>NotoColorEmoji</string></test>
      <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
  </match>

  <match target="pattern">
      <test qual="any" name="family"><string>Android Emoji</string></test>
      <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
  </match>

  <match target="pattern">
      <test qual="any" name="family"><string>Noto Emoji</string></test>
      <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
  </match>

  <match target="pattern">
      <test qual="any" name="family"><string>Twitter Color Emoji</string></test>
      <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
  </match>

  <match target="pattern">
      <test qual="any" name="family"><string>Twemoji</string></test>
      <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
  </match>

  <match target="pattern">
      <test qual="any" name="family"><string>Twemoji Mozilla</string></test>
      <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
  </match>

  <match target="pattern">
      <test qual="any" name="family"><string>TwemojiMozilla</string></test>
      <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
  </match>

  <match target="pattern">
      <test qual="any" name="family"><string>EmojiTwo</string></test>
      <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
  </match>

  <match target="pattern">
      <test qual="any" name="family"><string>Emoji Two</string></test>
      <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
  </match>

  <match target="pattern">
      <test qual="any" name="family"><string>EmojiSymbols</string></test>
      <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
  </match>

  <match target="pattern">
      <test qual="any" name="family"><string>Symbola</string></test>
      <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
  </match>

  <alias>
    <family>monospace</family>
    <prefer>
      <family>Fira Code</family>
      <family>Source Hans Sans</family>
    </prefer>
  </alias>

  <alias>
    <family>serif</family>
    <prefer>
      <family>Fira Sans</family>
      <family>Source Hans Sans</family>
    </prefer>
  </alias>

  <alias>
    <family>sans-serif</family>
    <prefer>
      <family>Fira Sans</family>
      <family>Source Hans Sans</family>
    </prefer>
  </alias>

  <match>
    <test name="family"><string>Arial</string></test>
    <edit name="family" mode="assign" binding="strong">
      <string>Fira Sans</string>
      <family>Source Hans Sans</family>
    </edit>
  </match>

  <match>
    <test name="family"><string>Roboto</string></test>
    <edit name="family" mode="assign" binding="strong">
      <string>Fira Sans</string>
      <family>Source Hans Sans</family>
    </edit>
  </match>

  <match>
    <test name="family"><string>Helvetica</string></test>
    <edit name="family" mode="assign" binding="strong">
      <string>Fira Sans</string>
      <family>Source Hans Sans</family>
    </edit>
  </match>

  <match>
    <test name="family"><string>Verdana</string></test>
    <edit name="family" mode="assign" binding="strong">
      <string>Fira Sans</string>
      <family>Source Hans Sans</family>
    </edit>
  </match>

  <match>
    <test name="family"><string>Tahoma</string></test>
    <edit name="family" mode="assign" binding="strong">
      <string>Fira Sans</string>
      <family>Source Hans Sans</family>
    </edit>
  </match>

  <match>
    <test name="family"><string>Comic Sans MS</string></test>
    <edit name="family" mode="assign" binding="strong">
      <string>Fira Sans</string>
      <family>Source Hans Sans</family>
    </edit>
  </match>

  <match>
    <test name="family"><string>Times New Roman</string></test>
    <edit name="family" mode="assign" binding="strong">
      <string>Tinos</string>
      <family>Source Hans Sans</family>
    </edit>
  </match>

  <match>
    <test name="family"><string>Times</string></test>
    <edit name="family" mode="assign" binding="strong">
      <string>Tinos</string>
      <family>Source Hans Sans</family>
    </edit>
  </match>

  <match>
    <test name="family"><string>Courier New</string></test>
    <edit name="family" mode="assign" binding="strong">
      <string>Cousine</string>
      <family>Source Hans Sans</family>
    </edit>
  </match>

  <match>
    <test name="family"><string>menlo</string></test>
    <edit name="family" mode="assign" binding="strong">
      <string>Fira Code</string>
      <family>Source Hans Sans</family>
    </edit>
  </match>

  <match>
    <test name="family"><string>DejaVu Sans Mono</string></test>
    <edit name="family" mode="assign" binding="strong">
      <string>Fira Code</string>
      <family>Source Hans Sans</family>
    </edit>
  </match>

</fontconfig>
